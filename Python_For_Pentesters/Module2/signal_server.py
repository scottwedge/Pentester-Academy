import signal
import SocketServer
import SimpleHTTPServer
import sys

def handle(signal,frame):
    print ("Closing now....")
    sys.exit()

port = 8

signal.signal(signal.SIGALRM,handle)

if sys.argv[1] == '-s':
    num = int(sys.argv[2])

handler = SimpleHTTPServer.SimpleHTTPRequestHandler

httpd = SocketServer.TCPServer(("",port),handler)
print "Serving at port %d" %port
signal.alarm(num)

httpd.serve_forever()
