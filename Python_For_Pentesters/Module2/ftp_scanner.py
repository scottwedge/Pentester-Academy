import threading
import queue
from ftplib import FTP

ftp_servers = ['79.96.183.41','62.129.208.50','46.242.173.171','188.128.211.5','62.129.206.190','79.96.215.174','79.96.7.179','79.96.17.60','174.76.184.116']

class WorkerThread(threading.Thread):

    def __init__(self,queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        ip = self.queue.get()
        try:
            ftp = FTP(ip)
            ftp.login()
            ftp.retrlines('LIST')
            ftp.quit()
            self.queue.task_done()
        except:
            print "Connection problem"
            self.queue.task_done()
            
queue = queue.Queue()

for i in range(len(ftp_servers)):
    worker = WorkerThread(queue)
    worker.setDaemon(True)
    worker.start()
    print "WorkerThread %d Created" %i

for ip in ftp_servers:
    queue.put(ip)

queue.join()

print "Done!!"
