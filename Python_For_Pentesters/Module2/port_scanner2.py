from concurrent.futures import ThreadPoolExecutor, as_completed
import socket

def connection(port):
    with socket.socket(socket.AF_INET,socket.SOCK_STREAM) as s:
        result = s.connect_ex(('0.0.0.0',port))
    return result

def main():
    future_to_port = dict()
    with ThreadPoolExecutor(max_workers=11) as executor:
        for port in range(65535):
            future = executor.submit(connection,port)
            future_to_port[future] = port

        for future in as_completed(future_to_port):
            res = future.result()
            port = future_to_port[future]
            if res == 0:
                print(f'Found: {port}')

if __name__ == "__main__":
    main()
