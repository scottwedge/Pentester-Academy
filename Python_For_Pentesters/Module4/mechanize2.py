import mechanize

br = mechanize.Browser()
#br.set_proxies({'http':'localhost:8080'})      Proxy support 
br.open("http://student.security.net/login/index.php")

print "Forms Available"
for forms in br.forms():
    print forms

br.select_form(nr=0)
br.form['username'] = "demo-user"
br.form['password'] = "demouser1]M"
br.submit()

print "Links Available"
for link in br.links():
    print links.url + ' : ' + link.text

"""Now to select the link we do it based on text the link uses"""

new_link = br.click_link(text = 'moodle[IMG]Change password')   #text  = link.text to be selected
br.open(new_link)

print br.response().read

print "Forms"

for forms in br.forms():
    print forms

br.select_form(nr=0)
br.form['passowrd'] = #Old password
br.form['newpassword1'] = #New password
br.form['newpassword2'] = #New password confirmation

br.submit()
