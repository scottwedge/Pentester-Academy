import urllib
import sys
import time

def reporthook(count,block_size,total_size):
    global start_time
    global s

    if count==0:
        start_time = time.time()
        return 
    
    duration = time.time() - start_time
    percentage = int(count * block_size * 100 / total_size)
    
    if (percentage > 100):
        percentage=100
    s=s+'#'
    speed = int(count * block_size / (1024 * duration))
    sys.stdout.write("\r %s %d%%...,%d MB, %d KB/s,%d seconds passed" %(s,percentage,count * block_size / (1024 * 1024),speed,duration))
    sys.stdout.flush()

def save(url,filename):
    urllib.urlretrieve(url,filename,reporthook)

if __name__ == "__main__":
    s=''
    url="https://cdn.vox-cdn.com/thumbor/th5YNVqlkHqkz03Va5RPOXZQRhA=/0x0:2040x1360/1200x800/filters:focal(857x517:1183x843)/cdn.vox-cdn.com/uploads/chorus_image/image/57358643/jbareham_170504_1691_0020.0.0.jpg"
    filename="output_file.jpg"
    save(url,filename)

