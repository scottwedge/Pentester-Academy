import urllib
import sys
import time

def reporthook(count,block_size,total_size):
    global start_time
    global s

    if count==0:
        start_time = time.time()
        return 
    
    duration = time.time() - start_time
    percentage = int(count * block_size * 100 / total_size)
    
    if (percentage > 100):
        percentage=100
    speed = int(count * block_size / (1024 * duration))
    sys.stdout.write("\r %s %d%%...,%d MB, %d KB/s,%d seconds passed" %(s,percentage,count * block_size / (1024 * 1024),speed,duration))
    sys.stdout.flush()

def save(url,filename):
    urllib.urlretrieve(url,filename,reporthook)

if __name__ == "__main__":
    url="http://xyz.com"
    filename="output_file"
    save(url,filename)

